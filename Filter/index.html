<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filter1</title>

    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Display:wght@400;500;700;900&display=swap"
        rel="stylesheet">

    <form id="Filters" class="controls clearfix">
        <fieldset>
            <h4>Shapes</h4>
            <div class="checkbox">
                <input type="checkbox" value=".square" />
                <label>Square</label>
            </div>
            <div class="checkbox">
                <input type="checkbox" value=".circle" />
                <label>Circles</label>
            </div>
            <div class="checkbox">
                <input type="checkbox" value=".triangle" />
                <label>Triangle</label>
            </div>
        </fieldset>
        <fieldset>
            <h4>Colors</h4>
            <div class="checkbox">
                <input type="checkbox" value=".white" />
                <label>White</label>
            </div>
            <div class="checkbox">
                <input type="checkbox" value=".orange" />
                <label>Orange</label>
            </div>
            <div class="checkbox">
                <input type="checkbox" value=".blue" />
                <label>Blue</label>
            </div>
        </fieldset>
        <fieldset>
            <h4>Sizes</h4>
            <div class="checkbox">
                <input type="checkbox" value=".small" />
                <label>Small</label>
            </div>
            <div class="checkbox">
                <input type="checkbox" value=".large" />
                <label>Large</label>
            </div>
        </fieldset>
        <button id="reset">Clear Filters</button>
    </form>

    <div id="Container" class="container">
        <div class="box">
            <div class="mix triangle white large"></div>
        </div>
        <div class="box">
            <div class="mix square white small"></div>
        </div>
        <div class="box">
            <div class="mix circle orange large"></div>
        </div>
        <div class="box">
            <div class="mix triangle blue large"></div>
        </div>
        <div class="box">
            <div class="mix square white large"></div>
        </div>
        <div class="box">
            <div class="mix circle blue small"></div>
        </div>
        <div class="box">
            <div class="mix triangle orange large"></div>
        </div>
        <div class="box">
            <div class="mix square blue large"></div>
        </div>
        <div class="box">
            <div class="mix circle white large"></div>
        </div>
        <div class="box">
            <div class="mix triangle orange small"></div>
        </div>
        <div class="box">
            <div class="mix triangle blue small"></div>
        </div>
        <div class="box">
            <div class="mix circle white small"></div>
        </div>
        <div class="box">
            <div class="mix circle orange small"></div>
        </div>
        <div class="box">
            <div class="mix square orange small"></div>
        </div>
        <div class="box">
            <div class="mix circle blue large"></div>
        </div>

        <span class="noItem">No items were found matching the selected filters</span>

    </div>
    <!-- <div class="fail-message"><span>No items were found matching the selected filters</span></div> -->
</body>

<script src="assets/js/jquery.min.js"></script>
<!-- <script src="assets/js/jquery.mixitup.js"></script> -->
<script>
    //다른 방법으로 직접 해보기!!! 히말라야 시에틀 ;;

    let inputBtn = $("input");
    console.log(inputBtn);
    let inputBtnValue = '';
    let boxCorrespondingToTheInput = '';

    //선택한 아이템 1도 없을 때 나오는 안내글
    noItem = $(".noItem");

    //클리어필터
    const clearFilterBtn = $("#reset");

    //필드셋
    let prevInputBtn = ''; 
    let prevInputBtnField ='';
    let prevInputBtnFieldIndex = '';
    let count2 = 0;
    let prevInputValue = '';
    let prevboxCorrespondingToTheInput = '';


    //input버튼 클릭했을 때☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★☆★
    inputBtn.click(function () {
        inputBtnValue = $(this).attr('value');
        console.log(inputBtnValue);
        boxCorrespondingToTheInput = $(inputBtnValue).parent('.box');
        console.log($(inputBtnValue));
        console.log(boxCorrespondingToTheInput);

        //지금 필드셋
        let inputBtnField = $(this).parent('div').parent('fieldset');
        console.log(inputBtnField);
        let inputBtnFieldIndex = $(this).parent('div').parent('fieldset').index();
        console.log(inputBtnFieldIndex);
      
        
        // console.log((prevInputBtnField != inputBtnField));
        // if((prevInputBtnField != inputBtnField) && (count2 != 0)){
        //     console.log(count2);
        //     //이런 경우는 없을 거임.. 여러 도형 넣어서...
        //     if(boxCorrespondingToTheInput.child('div').hasClass(prevInputValue) == false){
        //         //그래로 내려감
        //     }else{   
        //     }
        // }

        if(prevInputBtnField != inputBtnField && prevInputBtnField !=''){
            count2++;
            console.log(count2);
            console.log(count2);

        }
        
        console.log($('input:checked').attr('value'));
        $('input:checked').attr('value');


        //pick붙어있지 않을 때
        console.log(boxCorrespondingToTheInput.hasClass('pick') == false);
        if (boxCorrespondingToTheInput.hasClass('pick') == false) {
            //클릭하다 보면 hide 클래스 붙음
            // $('.box').each(function(){
            //     if($(this).child('div').hasClass(inputBtnValue) == false){
            //         boxCorrespondingToTheInput.removeClass('hide');
            //         boxCorrespondingToTheInput.addClass('pick');
            //     }
            // })
            // if($(inputBtnValue).parent(".box.pick").find('div')){

            // }

            
            // console.log(inputBtnField.siblings('fieldset'));
            // inputBtnField.siblings();
             // 클릭하다 보면 hide 클래스 붙음
                boxCorrespondingToTheInput.removeClass('hide');
                boxCorrespondingToTheInput.addClass('pick');
                console.log($('.box.pick'));
                $(".box").each(function () {
                    if ($(this).hasClass('pick') == false) {
                        $(this).addClass('hide');
                    }
                })
            
            // if($(".box").hasClass("pick") == false){
            //     noItem.css({'display':'block'});
            // }

            //pick붙어 있을 때
            } else {
                console.log( $(inputBtnValue).parent(".box.pick").find('div'));
                $(inputBtnValue).parent(".box.pick").find('div');
                // console.log($('.box.pick').find('div'));
                // console.log($('.box.pick').find('div').hasClass(inputBtnValue) == true);
                 //pick이 붙어있을 때
                if($(inputBtnValue).parent(".box.pick").find('div')){
                    console.log("여기");
                    //     boxCorrespondingToTheInput.each(function(){
                    //         $(this).removeClass('pick');
                    //         $(this).addClass('hide');
                    // })
                    $(inputBtnValue).parent(".box.pick").addClass('pick2');
                    // $(inputBtnValue).parent(".box.pick").find('div').addClass('pick');
                    $('.box.pick').removeClass('pick');
                    $('.box').addClass('hide');
                    // $(inputBtnValue).parent(".box.pick2").removeClass('hide');
                    $(inputBtnValue).parent(".box.pick2").removeClass('hide').addClass('pick').removeClass('pick2');
                    // $('.box.pick').each(function(){
                    //     if($(this).find('div') != $(inputBtnValue).parent(".box.pick").find('div')){
                    //         $(this).removeClass('pick');
                    //         $(this).addClass('hide');
                    //     }

                    // })
                }else{
                    // 클릭하다 보면 pick 클래스 붙음
                    boxCorrespondingToTheInput.removeClass('pick');
                    boxCorrespondingToTheInput.addClass('hide');
                }
            

            //클릭하다 보면 pick 클래스 붙음
            // boxCorrespondingToTheInput.removeClass('pick');
            // boxCorrespondingToTheInput.addClass('hide');
        }


        //백업
        // if (boxCorrespondingToTheInput.hasClass('pick') == false) {
        //     //클릭하다 보면 hide 클래스 붙음
        //     // $('.box').each(function(){
        //     //     if($(this).child('div').hasClass(inputBtnValue) == false){
        //     //         boxCorrespondingToTheInput.removeClass('hide');
        //     //         boxCorrespondingToTheInput.addClass('pick');
        //     //     }
        //     // })
             
        //     // 클릭하다 보면 hide 클래스 붙음
        //     boxCorrespondingToTheInput.removeClass('hide');
        //     boxCorrespondingToTheInput.addClass('pick');

        //     $(".box").each(function () {
        //         if ($(this).hasClass('pick') == false) {
        //             $(this).addClass('hide');
        //         }
        //     })
        //     // if($(".box").hasClass("pick") == false){
        //     //     noItem.css({'display':'block'});
        //     // }

        //     } else {
        //         console.log($('.box.pick').find('div').hasClass(inputBtnValue) == true);
        //          //pick이 붙어있을 때
        //         if($('.box.pick').find('div').hasClass(inputBtnValue) == true){
        //             console.log($('.box.pick').find('div').hasClass(inputBtnValue) == true);
        //             //     boxCorrespondingToTheInput.each(function(){
        //             //         $(this).removeClass('pick');
        //             //         $(this).addClass('hide');
        //             // })
        //             $('.box.pick').each(function(){
        //                 if($(this).hasClass(inputBtnValue) == false){
        //                     $(this).removeClass('pick');
        //                     $(this).addClass('hide');
        //                 }
        //             })
        //         }else{
        //             // 클릭하다 보면 pick 클래스 붙음
        //             boxCorrespondingToTheInput.removeClass('pick');
        //             boxCorrespondingToTheInput.addClass('hide');
        //         }
            

        //     //클릭하다 보면 pick 클래스 붙음
        //     // boxCorrespondingToTheInput.removeClass('pick');
        //     // boxCorrespondingToTheInput.addClass('hide');
        // }

        
        //이전 필드셋
        prevInputBtn = $(this);
        console.log(prevInputBtn);
        prevInputBtnField = prevInputBtn.parent().parent('fieldset');
        console.log(prevInputBtnField);
        prevInputValue = prevInputBtn.attr('value');
        prevboxCorrespondingToTheInput = $(prevInputValue).parent('.box');





        //margin 조정
        let boxPicked = $(".box.pick");
        console.log(boxPicked);
        boxPicked.each(function(i){
            let index = $(this).index();
            console.log(index);
            console.log(i);
            if((i+1)%5 == 0){
                $(this).css({'margin-right': '0'});
            }else{
                $(this).css({'margin-right': '1%'});
            }
        })

        //input 모두 체크 안 됐을 때
        let count = 0;
        inputBtn.each(function(){
            console.log($(this).is(":checked"));
            if(!$(this).is(":checked")){
                count ++;
            }
        })
        if(count == inputBtn.length){
            //함수 불러도 됨  boxReset();
            $(".box").removeClass("hide");
            //위에서 이미 pick 없앰
            //$(".box").removeClass("pick");

            $('.box').each(function(){
                let boxIndex = $(this).index();
                console.log(boxIndex);
                if((boxIndex+1) % 5 == 0){
                    $(this).css({'margin-right': '0'});
                }else{
                    $(this).css({'margin-right': '1%'});
                }
            })
            count2 = 0;
        }


    })

    function boxReset(){
        //
    }
    function inputClicked(){
        //
    }



    clearFilterBtn.click(function(){
         //  함수 불러도 됨  boxReset();
        $(".box").removeClass("hide");
        //없는 이유는 
        $(".box").removeClass("pick");

        $('.box').each(function(){
            let boxIndex = $(this).index();
            console.log(boxIndex);
            if((boxIndex+1) % 5 == 0){
                $(this).css({'margin-right': '0'});
            }else{
                $(this).css({'margin-right': '1%'});
            }
        })
        count2 = 0;
    })





</script>

</html>